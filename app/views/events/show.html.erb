<p>
  <strong>Name:</strong>
  <%= @event.name %>
</p>

<p>
  <strong>Date:</strong>
  <%= @event.date %>
</p>

<!-- form for user to rsvp to an event -->

<% if user_signed_in? && Rsvp.find_by_user_id(current_user.id).nil? %>
  <!-- <form action="/rsvps" method="post">
    <p><strong>RSVP:</strong>
      <input type="hidden" name="rsvp[user_id]" value="<%= current_user.id%>">
      <input type="hidden" name="rsvp[event_id]" value="<%= params[:id]%>">
      <input type="submit" value="Yes">
    </p>
  </form> -->
  <%= form_for Rsvp.new, url: rsvps_path, method: :post do |f| %>
    <p><strong>RSVP:</strong>
      <%= f.hidden_field :user_id, value: current_user.id %>
      <%= f.hidden_field :event_id, value: params[:id] %>
      <%= f.submit "Yes" %>
    </p>
  <% end %>

<!-- form to delete user rsvp -->
<% elsif user_signed_in? && !Rsvp.find_by_user_id(current_user.id).nil? %>
  <%= form_for Rsvp.find_by(user_id: current_user.id, event_id: params[:id]), url: rsvp_path, method: :delete do |f| %>
    <p><strong>RSVP:</strong>
      <%= f.submit "Cancel RSVP" %>
    </p>
  <% end %>

<% else %>

  <p><%= link_to "Sign in to RSVP!", new_user_session_path %></p>

<% end %>

<!-- end of form that deletes user's rsvp -->

<% if @event.image.file? %>
  <p>
    <%= link_to image_tag(@event.image.url(:large)), @event.image.url %>
  </p>
<% end %>

<p>
  <strong>Venue:</strong>
  <%= @event.venue.name %>
</p>

<p>
  <strong>Description:</strong>
  <%= @event.description %>
</p>

<p>
  <strong>Hosted by:</strong>
  <% user = User.find(@event.venue.user_id) %>
  <%= user.first_name %>
</p>


<% if user_signed_in? %>
  <form action="/event_reviews" method="post">
    <textarea name="event_review[review]" style="margin-top: 0px; margin-bottom: 0px; height: 200px; width: 200px;"></textarea> <br>
     <input type="hidden" name="event_review[user_id]" value="<%= current_user.id%>">
    <input type="hidden" name="event_review[event_id]" value="<%= params[:id]%> "> <br>
    <input type="submit" value="Review!">

  </form>

  <% else %>
  | <%= link_to 'Sign in to Review', new_user_session_path %>

  <% end %>

<h3>New Comment</h3>
<%= render 'comments/form', comment: @comment %>

<% if @comments %>
  <h3>Comments</h3>
  <% @comments.each do |comment| %>
    <h5> Posted By: <%= comment.user.username %> </h5>
    <div class="comment_area">
    <%= comment.text %>
    </div>
    <%= link_to 'edit', edit_comment_path(comment) %>
    <%= link_to 'destroy', comment_path(comment), method: "delete" %>

  <% end %>
<% end %>

<div class="five_space">
</div>

<div class="show_edit_back_section">
  <% if !current_user.nil? && @event.user == current_user %>
    <%= link_to 'Edit', edit_event_path(@event) %>
  <% end %> |
  <%= link_to 'Back', events_path %>
</div>
