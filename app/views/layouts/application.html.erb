<!DOCTYPE html>
<html>
  <head>
    <title>Whelp</title>
    <%= csrf_meta_tags %>

    <%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track': 'reload' %>
    <%= javascript_include_tag 'application', 'data-turbolinks-track': 'reload' %>

    <%= yield :head %>

    <!-- Facebook script -->
    <div id="fb-root"></div>
    <script>(function(d, s, id) {
      var js, fjs = d.getElementsByTagName(s)[0];
      if (d.getElementById(id)) return;
      js = d.createElement(s); js.id = id;
      js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.8";
      fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));</script>
    <!-- Twitter script -->
    <script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>

  </head>

  <body>


    <div class="container">
      <div class="col-sm-1"></div>
      <div class="col-sm-10">
        <nav>
          <ul class="nav nav-tabs">
            <li role="presentation"
              <% if request.original_url.ends_with?('/') %>
                class="active"
              <% end %>
              ><%= link_to 'Home', root_path %>
            </li>

            <li role="presentation"
              <% if request.original_url.ends_with?('/venues') %>
                class="active"
              <% end %>
              ><%= link_to 'Venues', venues_path %>
            </li>

            <li role="presentation"
              <% if request.original_url.ends_with?('/events') %>
                class="active"
              <% end %>
              ><%= link_to 'Events', events_path %>
            </li>

            <% if !user_signed_in? %>
              <li role="presentation"
                <% if request.original_url.ends_with?('/sign_up') %>
                  class="active"
                <% end %>
                ><%= link_to 'Sign Up', new_user_registration_path %>
              </li>

              <li role="presentation"
                <% if request.original_url.ends_with?('/sign_in') %>
                  class="active"
                <% end %>
                ><%= link_to 'Sign In', new_user_session_path %>
              </li>
            <% else %>

            <li role="presentation"
              <% if request.original_url.ends_with?("/users/#{current_user.id}") %>
              class="active"
            <% end %>
            ><%= link_to "Profile", "/users/#{current_user.id}" %></li>

            <li role="presentation"><%= link_to 'Sign Out', destroy_user_session_path, method: :delete %>
            </li>
            <li><%= "Hi, #{current_user.username}" %></li>
            <% end %>

          </ul>
        </nav>

        <% unless notice.nil? %>
          <p class="notice"><%= notice %></p>
        <% end %>
        <% unless alert.nil? %>
          <p class="alert"><%= alert %></p>
        <% end %>

        <%= yield %>

      </div>
      <div class="col-sm-1"></div>
    </div>

  </body>
</html>
